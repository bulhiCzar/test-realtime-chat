{"version":3,"sources":["style/Entry.module.scss","style/App.module.scss","reducer.js","uikit/Button.js","uikit/Input.js","components/Auth.js","components/History.js","components/Entry.js","App.js","index.js","style/Auth.module.scss","style/History.module.scss"],"names":["module","exports","state","action","type","auth","name","payload","messages","push","Button","className","text","join","Input","placeholder","value","onChange","Auth","dispatch","useContext","AppContext","useState","input","setInput","s","authTitle","onSubmit","e","preventDefault","authBody","authBodyInput","target","authBodyBtn","History","scrollRef","useRef","loadHistory","a","axios","get","res","status","Error","data","current","scrollTop","scrollHeight","setTimeout","useEffect","history","ref","length","map","message","idx","historyMessage","historyMessageSender","sender","historyMessageText","historyEmpty","SendSvg","version","xmlns","fill","d","Entry","post","console","log","entry","entryInput","entryButton","initState","createContext","App","useReducer","reducer","Provider","wrapper","chat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.dc941a29.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"entry\":\"Entry_entry__Sj-jL\",\"entryInput\":\"Entry_entryInput__3L_ch\",\"entryButton\":\"Entry_entryButton__3nc9m\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"App_wrapper__2scag\",\"chat\":\"App_chat__1O2S5\"};","export default (state, action)=>{\r\n    switch (action.type) {\r\n        case 'login':\r\n            return {...state, auth: true, name: action.payload}\r\n        case 'send':\r\n            state.messages.push(action.payload)\r\n            return {...state}\r\n        case 'load':\r\n            state.messages.push(action.payload)\r\n            return {...state}\r\n        default:\r\n            return {...state}\r\n    }\r\n}","const Button = ({className, text})=>{\r\n    return(\r\n        <button className={[className, 'btn'].join(' ')}>{text}</button>\r\n    )\r\n}\r\n\r\nexport default Button","const Input = ({className, placeholder, value, onChange})=>{\r\n    return(\r\n        <input\r\n            className={['input', className].join(' ')}\r\n            type=\"text\"\r\n            placeholder={placeholder}\r\n            value={value}\r\n            onChange={onChange}\r\n        />\r\n    )\r\n}\r\n\r\nexport default Input","import s from '../style/Auth.module.scss'\r\nimport {useContext, useState} from \"react\";\r\nimport {AppContext} from \"../App\";\r\nimport Button from \"../uikit/Button\";\r\nimport Input from \"../uikit/Input\";\r\n\r\nconst Auth = ()=>{\r\n    const {dispatch} = useContext(AppContext)\r\n    const [input, setInput] = useState('')\r\n\r\n    function handlerInput(e) {\r\n        setInput(e.target.value)\r\n    }\r\n\r\n    function submit(e) {\r\n        e.preventDefault()\r\n        if (!input) return\r\n\r\n        dispatch({\r\n            type: 'login',\r\n            payload: input\r\n        })\r\n    }\r\n\r\n    return(\r\n        <div className={s.auth}>\r\n            <div className={s.authTitle}>\r\n                Авторизация\r\n            </div>\r\n            <form onSubmit={submit} className={s.authBody}>\r\n                <Input\r\n                    className={s.authBodyInput}\r\n                    placeholder='Имя'\r\n                    value={input}\r\n                    onChange={handlerInput}\r\n                />\r\n                <Button\r\n                    className={s.authBodyBtn}\r\n                    text='Войти'\r\n                />\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Auth","import s from '../style/History.module.scss';\r\nimport {AppContext} from \"../App\";\r\nimport {useContext, useEffect, useRef} from \"react\";\r\nimport axios from \"axios\";\r\n\r\n\r\nconst History = () => {\r\n    const {state, dispatch} = useContext(AppContext)\r\n    const scrollRef = useRef()\r\n\r\n    const loadHistory = async () => {\r\n        try {\r\n            const res = await axios.get('/api/chat/')\r\n            if (res.status !== 200) throw new Error()\r\n            dispatch({\r\n                type: 'load',\r\n                payload: res.data\r\n            })\r\n\r\n            scrollRef.current.scrollTop = scrollRef.current.scrollHeight\r\n\r\n            await loadHistory()\r\n        } catch (e) {\r\n            setTimeout(loadHistory, 500)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadHistory()\r\n    }, [])\r\n\r\n\r\n    return (\r\n        <div className={s.history} ref={scrollRef}>\r\n            {\r\n                state.messages.length ?\r\n                    state.messages.map((message, idx) => {\r\n                        return (\r\n                            <div className={s.historyMessage} key={idx}>\r\n                                <div className={s.historyMessageSender}>\r\n                                    {message.sender}\r\n                                </div>\r\n                                <div className={s.historyMessageText}>\r\n                                    {message.text}\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    })\r\n                    :\r\n                    <div className={s.historyEmpty}>Нет сообщений</div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default History","import Input from \"../uikit/Input\";\r\nimport s from '../style/Entry.module.scss'\r\nimport Button from \"../uikit/Button\";\r\nimport {useContext, useState} from \"react\";\r\nimport {AppContext} from \"../App\";\r\nimport axios from \"axios\";\r\n\r\nconst Entry = ()=>{\r\n    const {state, dispatch} = useContext(AppContext)\r\n    const [input, setInput] = useState('')\r\n\r\n    function handlerInput(e) {\r\n        setInput(e.target.value)\r\n    }\r\n\r\n    async function submit(e) {\r\n        e.preventDefault()\r\n        if (!input) return\r\n\r\n        setInput('')\r\n\r\n        const res = await axios.post('/api/chat/', {text: input, sender: state.name})\r\n        if (res.status !== 200) {\r\n            console.log('error')\r\n        }\r\n    }\r\n\r\n    return(\r\n        <form onSubmit={submit} className={s.entry}>\r\n            <Input\r\n                className={s.entryInput}\r\n                value={input}\r\n                onChange={handlerInput}\r\n            />\r\n            <Button className={s.entryButton} text={<SendSvg/>}/>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst SendSvg = ()=>(\r\n    <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/1999/xlink\" width=\"26\" height=\"26\" viewBox=\"0 0 16 16\">\r\n        <path fill=\"#444444\" d=\"M16 0l-16 8 4.7 1.6 0.3 5.4 2.5-2.8 2.5 3.8 6-16zM7.5 10.4l4.3-5.9-6.2 4.3-3-1 11.6-5.8-4.5 11.8-2.2-3.4z\"/>\r\n    </svg>\r\n)\r\n\r\nexport default Entry","import s from './style/App.module.scss';\nimport reducer from \"./reducer\";\nimport {useReducer, createContext} from \"react\";\nimport Auth from \"./components/Auth\";\nimport History from \"./components/History\";\nimport Entry from \"./components/Entry\";\n\nconst initState = {auth: false, name: '', messages: []}\n\nfunction App() {\n    const [state, dispatch] = useReducer(reducer, initState)\n\n\n    return (\n        <AppContext.Provider value={{state, dispatch}}>\n            <div className={s.wrapper}>\n                {\n                    state.auth ?\n                        <div className={s.chat}>\n                            <History/>\n                            <Entry/>\n                        </div>\n                        :\n                        <Auth/>\n                }\n            </div>\n        </AppContext.Provider>\n    );\n}\n\nexport const AppContext = createContext({\n    state: {...initState},\n    dispatch: () => {\n    },\n})\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style/index.css';\nimport App from './App';\nimport './style/uikit.scss'\n\n\nReactDOM.render(\n    <App/>,\n    document.getElementById('root')\n)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth\":\"Auth_auth__1128F\",\"authTitle\":\"Auth_authTitle__3XwIO\",\"authBody\":\"Auth_authBody__HZdn0\",\"authBodyInput\":\"Auth_authBodyInput__3lSbk\",\"authBodyBtn\":\"Auth_authBodyBtn__3g87u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"history\":\"History_history__11-Kn\",\"historyMessage\":\"History_historyMessage__2YpOg\",\"historyMessageSender\":\"History_historyMessageSender__1BeCz\",\"historyMessageText\":\"History_historyMessageText__1Cj7H\",\"historyEmpty\":\"History_historyEmpty__YatrA\"};"],"sourceRoot":""}