(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{11:function(t,e,a){t.exports={entry:"Entry_entry__Sj-jL",entryInput:"Entry_entryInput__3L_ch",entryButton:"Entry_entryButton__3nc9m"}},13:function(t,e,a){t.exports={wrapper:"App_wrapper__2scag",chat:"App_chat__1O2S5"}},27:function(t,e,a){},48:function(t,e,a){},49:function(t,e,a){"use strict";a.r(e);var n=a(1),s=a(22),r=a.n(s),c=(a(27),a(3)),u=a(5),o=a(13),i=a.n(o),h=function(t,e){switch(e.type){case"login":return Object(c.a)(Object(c.a)({},t),{},{auth:!0,name:e.payload});case"send":case"load":return t.messages.push(e.payload),Object(c.a)({},t);default:return Object(c.a)({},t)}},l=a(7),j=a.n(l),p=a(0),d=function(t){var e=t.className,a=t.text;return Object(p.jsx)("button",{className:[e,"btn"].join(" "),children:a})},b=function(t){var e=t.className,a=t.placeholder,n=t.value,s=t.onChange;return Object(p.jsx)("input",{className:["input",e].join(" "),type:"text",placeholder:a,value:n,onChange:s})},y=function(){var t=Object(n.useContext)(E).dispatch,e=Object(n.useState)(""),a=Object(u.a)(e,2),s=a[0],r=a[1];return Object(p.jsxs)("div",{className:j.a.auth,children:[Object(p.jsx)("div",{className:j.a.authTitle,children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s&&t({type:"login",payload:s})},className:j.a.authBody,children:[Object(p.jsx)(b,{className:j.a.authBodyInput,placeholder:"\u0418\u043c\u044f",value:s,onChange:function(t){r(t.target.value)}}),Object(p.jsx)(d,{className:j.a.authBodyBtn,text:"\u0412\u043e\u0439\u0442\u0438"})]})]})},x=a(6),O=a.n(x),_=a(9),f=a(8),m=a.n(f),v=a(10),g=a.n(v),w=function(){var t=Object(n.useContext)(E),e=t.state,a=t.dispatch,s=Object(n.useRef)(),r=function(){var t=Object(_.a)(O.a.mark((function t(){var e;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.get("/api/chat/");case 3:if(200===(e=t.sent).status){t.next=6;break}throw new Error;case 6:return a({type:"load",payload:e.data}),s.current.scrollTop=s.current.scrollHeight,t.next=10,r();case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),setTimeout(r,500);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){r()}),[]),Object(p.jsx)("div",{className:m.a.history,ref:s,children:e.messages.length?e.messages.map((function(t,e){return Object(p.jsxs)("div",{className:m.a.historyMessage,children:[Object(p.jsx)("div",{className:m.a.historyMessageSender,children:t.sender}),Object(p.jsx)("div",{className:m.a.historyMessageText,children:t.text})]},e)})):Object(p.jsx)("div",{className:m.a.historyEmpty,children:"\u041d\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"})})},N=a(4),B=a(11),M=a.n(B),C=function(){var t;return Object(p.jsx)("svg",(t={version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Object(N.a)(t,"xmlns","http://www.w3.org/1999/xlink"),Object(N.a)(t,"width","26"),Object(N.a)(t,"height","26"),Object(N.a)(t,"viewBox","0 0 16 16"),Object(N.a)(t,"children",Object(p.jsx)("path",{fill:"#444444",d:"M16 0l-16 8 4.7 1.6 0.3 5.4 2.5-2.8 2.5 3.8 6-16zM7.5 10.4l4.3-5.9-6.2 4.3-3-1 11.6-5.8-4.5 11.8-2.2-3.4z"})),t))},S=function(){var t=Object(n.useContext)(E),e=t.state,a=(t.dispatch,Object(n.useState)("")),s=Object(u.a)(a,2),r=s[0],c=s[1];function o(){return(o=Object(_.a)(O.a.mark((function t(a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r){t.next=3;break}return t.abrupt("return");case 3:return c(""),t.next=6,g.a.post("/api/chat/",{text:r,sender:e.name});case 6:200!==t.sent.status&&console.log("error");case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(p.jsxs)("form",{onSubmit:function(t){return o.apply(this,arguments)},className:M.a.entry,children:[Object(p.jsx)(b,{className:M.a.entryInput,value:r,onChange:function(t){c(t.target.value)}}),Object(p.jsx)(d,{className:M.a.entryButton,text:Object(p.jsx)(C,{})})]})},k={auth:!1,name:"",messages:[]};var E=Object(n.createContext)({state:Object(c.a)({},k),dispatch:function(){}}),A=function(){var t=Object(n.useReducer)(h,k),e=Object(u.a)(t,2),a=e[0],s=e[1];return Object(p.jsx)(E.Provider,{value:{state:a,dispatch:s},children:Object(p.jsx)("div",{className:i.a.wrapper,children:a.auth?Object(p.jsxs)("div",{className:i.a.chat,children:[Object(p.jsx)(w,{}),Object(p.jsx)(S,{})]}):Object(p.jsx)(y,{})})})};a(48);r.a.render(Object(p.jsx)(A,{}),document.getElementById("root"))},7:function(t,e,a){t.exports={auth:"Auth_auth__1128F",authTitle:"Auth_authTitle__3XwIO",authBody:"Auth_authBody__HZdn0",authBodyInput:"Auth_authBodyInput__3lSbk",authBodyBtn:"Auth_authBodyBtn__3g87u"}},8:function(t,e,a){t.exports={history:"History_history__11-Kn",historyMessage:"History_historyMessage__2YpOg",historyMessageSender:"History_historyMessageSender__1BeCz",historyMessageText:"History_historyMessageText__1Cj7H",historyEmpty:"History_historyEmpty__YatrA"}}},[[49,1,2]]]);
//# sourceMappingURL=main.dc941a29.chunk.js.map